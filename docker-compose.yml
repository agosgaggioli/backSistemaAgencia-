version: "3.9"

services:
  api:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: degra_api
    restart: unless-stopped
    ports:
      - "3009:3009"
    environment:
      NODE_ENV: "production"
      PORT: "3009"

      # Postgres en Render
      DB_HOST: "dpg-d468ilqli9vc73dcdne0-a.oregon-postgres.render.com"
      DB_PORT: "5432"
      DB_NAME: "degradb"
      DB_USERNAME: "degradb_user"
      DB_PASSWORD: "vGef52Mjw8UXO69iv5IrUF9fBVBrb95M"
      DB_SSL: "true"

      # Opcionales (mejor pr√°ctica: false en prod, true solo en dev)
      DB_SYNCHRONIZE: "false"
      DB_LOGGING: "true"

      # Otros secretos de tu app (ej. MercadoPago, JWT, etc.)
      # MP_ACCESS_TOKEN: "xxxx"
      # JWT_SECRET: "xxxx"

    command: ["node", "dist/main.js"]
